1+1
3*4
2^3
5%%3
4^5
1+1
2*3
4^5
1+1
2*3
4^5
a+b
a<-4
b
b<-2
a+b
x<-c(1,2,3)
x+x
y<-c(1,2,3,4)
x+y
z<-c(1,2,3,4,5,6)
x+z
sqrt(16)
round(22.66666666666641,2)
round(78422.66666666666641,2)
round(78422.66666666666641,2)
round(78422.66666666666641,2)
round(78422.66666666666641,2)
round(78422.66666666666641,-2)
class(a)
is.character(a)
longx<-1:200
length(longx)
stringx<-"How are you?"
length(stringx)
stringx<-"How are you?"
length(stringx)
nchart(stringx)
stringx<-"How are you?"
length(stringx)
nchar(stringx)
floor(14557)
floor(14557)
floor(14557,-2)
floor(14557.1478)
#大標題
##次標題
###三標
q<-c(1.4:5.6)
x<-c(1:5)
x+3
seq(1,9)
seq(1.9,by=2)
seq(1,9,by=2)
rep(1,9)
s<-1:30
sum(s)
mean(s)
max(s)
min(s)
median(s)
round(sd(s),3)
summary(s)
sort(s)
sort(s,decreasing = T)
rev(s)
matrix(2,3)
matrix(nrow=2,ncol=3)
matrix(1:6,nrow=2,ncol=3)
matrix("a",nrow=2,ncol=3)
dim(matrix(1:6,nrow=2,ncol=3))
##從上次的解答開始
if (!require('SportsAnalytics')){
install.packages("SportsAnalytics")
library(SportsAnalytics)
}
NBA1415<-fetch_NBAPlayerStatistics("14-15")
for(i in 1:nrow(NBA1415)){
if(NBA1415[i,"GamesPlayed"]>70&NBA1415[i,"TotalPoints"]>1500){
print(NBA1415[i,c("Name","Team","Position")])
}
}
subset(NBA1415,GamesPlayed>70&TotalPoints>1500)[,c("Name","Team","Position")]
NBA1415[NBA1415$GamesPlayed>70&NBA1415$TotalPoints>1500,c("Name","Team","Position")]
NBA1415$GamesPlayed>70
San<-subset(NBA1415,Team=='SAN')
order(San$TotalPoints,decreasing = T)
San[order(San$TotalPoints,decreasing = T)[1],
c("Name","Team","TotalPoints")]
unique(NBA1415$Team)
for(team in unique(NBA1415$Team)){
selectTeam<-subset(NBA1415,Team==team)
print(selectTeam[order(selectTeam$TotalPoints,decreasing = T)[1],
c("Name","Team","TotalPoints")])
}
FinalOutput<-NULL
FinalOutput<-NULL
for(team in unique(NBA1415$Team)){
selectTeam<-subset(NBA1415,Team==team)
FinalOutput<-rbind(FinalOutput,
selectTeam[
order(selectTeam$TotalPoints,decreasing = T)[1],
c("Name","Team","TotalPoints")])
}
FinalOutput
sapply(iris, mean)
sapply(NBA1415[,c("GamesPlayed","TotalMinutesPlayed","TotalPoints")],mean)
lapply(iris, mean)
lapply(NBA1415[,c("GamesPlayed","TotalMinutesPlayed","TotalPoints")],mean)
tapply(NBA1415$Name,NBA1415$Team,length)
tapply(NBA1415$TotalPoints,NBA1415$Team,max)
tapply(NBA1415$TotalPoints,NBA1415$Team,mean)
NBA1415Team<-split(NBA1415[,c("TotalPoints","GamesPlayed")],NBA1415$Team)
NBA1415Team
NBA1415Team<-split(NBA1415[,c("TotalPoints","GamesPlayed")],NBA1415$Team)
NBA1415Team
lapply(NBA1415Team, colMeans)
sapply(NBA1415Team, colMeans)
aggregate(TotalPoints ~ Team+Position, data = NBA1415, mean)
aggregate(NBA1415$TotalPoints, by=list(NBA1415$Team,NBA1415$Position), FUN=mean, na.rm=TRUE)
aggregate(TotalPoints ~ Team+Position, data = NBA1415, mean)
x<-c(1,2,3,4,5,NA)
mean(x)
mean(x, na.rm=T)
aggregate(TotalPoints ~ Team+Position, data = NBA1415, mean)
aggregate(TotalPoints ~ Position, data = NBA1415, mean)
aggregate(TotalPoints ~ Team = NBA1415, mean)
aggregate(TotalPoints ~ Team, data = NBA1415, mean)
aggregate(TotalPoints ~ Team, data = NBA1415, max)
aggregate(TotalRebounds ~ Team+Position, data = NBA1415, mean)
x <- c(1, 2, NA, 4, NA, 5)
x[! is.na(x)]
x[! complete.cases(x)]
is.na(x)
! is.na(x)
x[complete.cases(x)]
round2<-function(v){
round(v,digits = 2)
}
round2(3.886)
f <- function(a, b) {
print(a)
print(b)
}
f(45)
##Lazy Evaluation 2
f <- function(a, b) {
print(a)
print(b)
}
f(45)
f(23,41)
roundmean(c(1.1,2,3,4,5))
roundmean<-function(vector, ...){
round(mean(vector,...),digits=2)
}
roundmean(c(1.1,2,3,4,5))
roundmean(c(1.1,2,3,4,5,NA))
roundmean(c(1.1,2,3,4,5,NA),na.rm=T)
round2<-function(v){
if(!is.numeric(v)){
print("輸入數字")
return()
}
round(v,digits = 2)
}
round2("a")
apply(iris,2,max)
RoundNumber2<-function(v,XFun){
round(XFun(v),digits = 2)
}
RoundNumber2(1.1:10.1,mean)
if (!require('SportsAnalytics')){
install.packages("SportsAnalytics")
library(SportsAnalytics)
}
NBA1415<-fetch_NBAPlayerStatistics("14-15")
aggregate(TotalPoints ~ Team+Position, data = NBA1415, mean)
aggregate(TotalPoints ~ Team+Name+Position, data = NBA1415, mean)
x<-c(TotalPoints)
y<-c(TotalMinutesPlayed)
CalEfficient<-x/y
x<-c("TotalPoints")
y<-c("TotalMinutesPlayed")
CalEfficient<-x/y
x<-c("TotalPoints")
x
y<-c(NBA1415$TotalPoints)
y
x<-c(NBA1415$TotalPoints)y<-c(NBA1415$TotalMinutesPlayed)
> CalEfficient<-x/y
x<-c(NBA1415$TotalPoints)
y<-c(NBA1415$TotalMinutesPlayed)
CalEfficient<-x/y
CalEfficient
aggregate(NBA1415$TotalPoints, by=list(NBA1415$Team,NBA1415$Position), FUN=mean, na.rm=TRUE)
#apply家族- 把函數功能當成參數
mat1 <- data.frame(1:4,5:8,9:12,13:16) #4個Columns，執行4次
mat1
sapply(mat1, function(x, y) {sum(x) + y}, y = 5)
library(jsonlite)
WaterData<-fromJSON(getURL("http://data.taipei/opendata/datalist/apiAccess?scope=resourceAquire&rid=190796c8-7c56-42e0-8068-39242b8ec927"))
names(WaterData)
WaterData<-fromJSON(getURL("http://data.taipei/opendata/datalist/apiAccess?scope=resourceAquire&rid=190796c8-7c56-42e0-8068-39242b8ec927"))
WaterData<-fromJSON(getURL("http://data.taipei/opendata/datalist/apiAccess?scope=resourceAquire&rid=190796c8-7c56-42e0-8068-39242b8ec927"))
WaterData<-fromJSON(getURL("http://data.taipei/opendata/datalist/apiAccess?scope=resourceAquire&rid=190796c8-7c56-42e0-8068-39242b8ec927"))
View(selectTeam)
apply(totalPage[,c("likes_count","comments_count","shares_count")],2,mean)
getPage("tsaiingwen", token,n = 10)
getPage("tsaiingwen", token,n = 10)
getPage("tsaiingwen", token,n = 10)
if (!require('Rfacebook')){
install.packages("Rfacebook")
library(Rfacebook)}
getPage("tsaiingwen", token,n = 10)
token<-"EAAFVaZBB5eAsBAL7QnmOzEeQeiJKsH4pSpzEGlFnI0ZAszKL5zZAyZCjf9D076QBwCpzzYCugRkLNZC60jMFDptf8jhh8illyqZAPIZBuZBDwEDLgVzMLlgOTxpkVtZB8l7M9vsydTclXZCJGSRfZB3xz2A4qnmZBgawOsKpwpFx6T7hQwZDZD"
FBData = GET(
paste0("https://graph.facebook.com/v2.5/tsaiingwen?fields=posts.limit(10)%7Bcomments%2Cmessage%7D&access_token=CAACEdEose0cBACDScfBDSe7k5gCbtUgtksnS0fKzCHJVt9keTpRXzzUjP3nwPSWIcIgMlQvMlg2Oooo1masrTZAwD5Q6EgRmnxsOW1vXyjyJNku8mvZBZCTWB5UvBvxjVGr35S09Ex8wx7ocJbZAkmlS7cVZAF5WkLyV0kpcEAUXAtZCHvVvdZBivFq7Vh8JfTGysL2Bf3WxwZDZD",
token))
names(FBData)
json1 = content(FBData)
names(json1)
if (!require('Rfacebook')){
install.packages("Rfacebook")
library(Rfacebook)}
getPage("tsaiingwen", token,n = 10)
token<-"EAAFVaZBB5eAsBAHSToJaGKiSH0efU1JH8sYTgLqE0U7BEf5a9lnMEKNmaEt3IMbV6pjadWIjan9RSuPkTUMeatx8wf7yKqd5gurWHteMdBI9R2QiruifEFcGmHvjYhxtfpf0EtD545tifCAbslSQCqNxlWalWtRNswjmSXQZDZD"
FBData = GET(
paste0("https://graph.facebook.com/v2.5/tsaiingwen?fields=posts.limit(10)%7Bcomments%2Cmessage%7D&access_token=EAAFVaZBB5eAsBAHSToJaGKiSH0efU1JH8sYTgLqE0U7BEf5a9lnMEKNmaEt3IMbV6pjadWIjan9RSuPkTUMeatx8wf7yKqd5gurWHteMdBI9R2QiruifEFcGmHvjYhxtfpf0EtD545tifCAbslSQCqNxlWalWtRNswjmSXQZDZD",
token))
names(FBData)
json1 = content(FBData)
names(json1)
if (!require('Rfacebook')){
install.packages("Rfacebook")
library(Rfacebook)}
getPage("tsaiingwen", token,n = 10)
token<-"EAAFVaZBB5eAsBAHSToJaGKiSH0efU1JH8sYTgLqE0U7BEf5a9lnMEKNmaEt3IMbV6pjadWIjan9RSuPkTUMeatx8wf7yKqd5gurWHteMdBI9R2QiruifEFcGmHvjYhxtfpf0EtD545tifCAbslSQCqNxlWalWtRNswjmSXQZDZD"
FBData = GET(
paste0("https://graph.facebook.com/v2.5/tsaiingwen?fields=posts.limit(10)%7Bcomments%2Cmessage%7D&access_token=EAAFVaZBB5eAsBAHSToJaGKiSH0efU1JH8sYTgLqE0U7BEf5a9lnMEKNmaEt3IMbV6pjadWIjan9RSuPkTUMeatx8wf7yKqd5gurWHteMdBI9R2QiruifEFcGmHvjYhxtfpf0EtD545tifCAbslSQCqNxlWalWtRNswjmSXQZDZD",
token))
names(FBData)
json1 = content(FBData)
names(json1)
getPost("tsaiingwen", token,n = 10)
View(FinalOutput)
getPost(id, token,n = 10)
totalPage<-NULL
DateVectorStr<-as.character(seq(as.Date("2016-01-01"),as.Date("2016-04-06"),by="2 days"))
for(i in 1:(length(DateVectorStr)-1)){
tempPage<-getPage("tsaiingwen", token,
since = DateVectorStr[i],until = DateVectorStr[i+1])
totalPage<-rbind(totalPage,tempPage)
}
post_id<-totalPage$id
getPost(post_id,n = 500,token,comments = TRUE,likes = FALSE)
getPost(post_id,n = 500,token)
post_id
install.packages("devtools")
library(devtools)
build_github_devtools()
#### Restart R before continuing ####
install.packages("devtools.zip", repos = NULL, type = "source")
# Remove the package after installation
unlink("devtools.zip")
post_id<-totalPage$id
post_id
getPost(post_id,n = 500,token)
if (!require('reshape2')){
install.packages("reshape2")
library(reshape2)
}
head(mtcars)
totalComment<-NULL
for(i in 1:10){##會跑很久.....建議先跑十筆就好(1:10)
post<-getPost(totalPage$id[i],token,n.comments = totalPage$comments_count[i])
tempComment<-cbind(post$post$id,post$comments$from_name)
totalComment<-rbind(totalComment,tempComment)
}
if (!require('Rfacebook')){
install.packages("Rfacebook")
library(Rfacebook)
}
totalComment<-NULL
for(i in 1:10){##會跑很久.....建議先跑十筆就好(1:10)
post<-getPost(totalPage$id[i],token,n.comments = totalPage$comments_count[i])
tempComment<-cbind(post$post$id,post$comments$from_name)
totalComment<-rbind(totalComment,tempComment)
}
token<-'EAACEdEose0cBAEj1y0q6774TbVAAK6MZAWacSTARxrBca7IcfjRGy2hHwHehNUUd9ZBcjRqRYXY4uyRfzv6jGBNXbLMV4wvfa0e0WqOnPh4viBuwtb57ZBZBREZCn0rfoBQztx82C4HTqusJfaxoWn2Axo5hK7fgwRYBjw5NaSgZDZD'
for(i in 1:10){##會跑很久.....建議先跑十筆就好(1:10)
post<-getPost(totalPage$id[i],token,n.comments = totalPage$comments_count[i])
tempComment<-cbind(post$post$id,post$comments$from_name)
totalComment<-rbind(totalComment,tempComment)
}
totalComment<-data.frame(totalComment)
colnames(totalComment)<-c("postID","commentName")
NameCount<-aggregate(postID~commentName,totalComment,FUN=length)
head(NameCount[order(NameCount$postID,decreasing=T),],10)
library(SportsAnalytics)
NBA1415<-fetch_NBAPlayerStatistics("14-15")
boxplot(Blocks~Position,data=NBA1415)
if (!require('lattice')){
install.packages("lattice")
library(lattice)
}
if (!require('ggplot2')){
install.packages("ggplot2")
library(ggplot2)
}
if (!require('datasets')){
install.packages("datasets")
library(datasets)
}
data(cars)
plot(cars$speed, cars$dist)
data(cars)
plot(cars$speed, cars$dist)
state <- data.frame(state.x77, region = state.region)
state
```{r,fig.height=2,fig.width=8}
xyplot(Life.Exp ~ Income | region, data = state, layout = c(4, 1))
```
qplot(Life.Exp, Income,facets = .~region, data = state)
data(mpg)
qplot(displ, hwy, data = mpg)
library(datasets)
hist(airquality$Ozone)
library(datasets)
with(airquality, plot(Wind, Ozone))
par("lty")
par("bg")
par("mar")
par("mfrow")
datasets
airquality
hist(airquality$Solar.R)
hist(airquality$Wind)
hist(airquality$Temp)
with(airquality, plot(Wind, Ozone))
plot(airquality$Wind,airquality$Ozone)   #上下兩個一樣寫法
plot(airquality$Wind,airquality$Ozone,pch=8,col='red')
plot(airquality$Wind,airquality$Ozone,pch=7,col='red')
plot(airquality$Wind,airquality$Ozone,pch=7,col='blue')
plot(airquality$Wind,airquality$Ozone,pch=7,col='purple')
plot(airquality$Wind,airquality$Ozone,pch=3,col='purple')
plot(airquality$Wind,airquality$Ozone,pch=5,col='purple')
title(main = "Ozone and Wind in New York City")
with(airquality, plot(Wind, Ozone))
title(main = "Ozone and Wind in New York City")
with(airquality, plot(Wind, Ozone,
main = "Ozone and Wind in NYC"))
with(subset(airquality, Month == 5),
points(Wind, Ozone, col = "blue"))
with(airquality, plot(Wind, Ozone, main = "Ozone and Wind in NYC", type = "n"))
with(subset(airquality, Month == 5), points(Wind, Ozone, col = "blue"))
with(subset(airquality, Month != 5), points(Wind, Ozone, col = "red"))
legend("topright", pch = 1, col = c("blue", "red"),
legend = c("May", "Other Months"))
with(airquality, plot(Wind, Ozone,
main = "Ozone and Wind in NYC"))
with(subset(airquality, Month == 5),
points(Wind, Ozone, col = "blue"))
with(airquality, plot(Wind, Ozone,
main = "Ozone and Wind in NYC", pch = 20))
model <- lm(Ozone ~ Wind, airquality)
abline(model, lwd = 2)
par(mfrow = c(1, 2))  #一行裡面畫兩張圖，先畫的在左邊
with(airquality, {
plot(Wind, Ozone, main = "Ozone and Wind")
plot(Solar.R, Ozone, main = "Ozone and Solar Radiation")
})
with(airquality, plot(Wind, Ozone,
main = "Ozone and Wind in NYC"))
with(subset(airquality, Month == 5),
points(Wind, Ozone, col = "blue"))
with(airquality, plot(Wind, Ozone,
main = "Ozone and Wind in NYC", pch = 20))
with(airquality, plot(Wind, Ozone,
main = "Ozone and Wind in NYC", pch = 20))
```{r,fig.height=3}
with(airquality, plot(Wind, Ozone,
main = "Ozone and Wind in NYC", pch = 20))
model <- lm(Ozone ~ Wind, airquality)
abline(model, lwd = 2)
```
```{r,fig.height=3}
with(airquality, plot(Wind, Ozone,
main = "Ozone and Wind in NYC", pch = 20))
model <- lm(Ozone ~ Wind, airquality)
abline(model, lwd = 2)
```
abline(model, lwd = 1,col='red')
par(mfrow = c(1, 2))  #一行裡面畫兩張圖(一個row畫兩張)，先畫的在左邊
with(airquality, {
plot(Wind, Ozone, main = "Ozone and Wind")
plot(Solar.R, Ozone, main = "Ozone and Solar Radiation")
})
par(mfrow = c(1, 1))
with(airquality, plot(Wind, Ozone,
main = "Ozone and Wind in NYC", pch = 20))
